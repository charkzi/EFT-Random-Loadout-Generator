<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>EFT Random Loadout Generator V3</title>
<style>
  body { background: #0b0b0b; color: #eaeaea; font-family: Arial, sans-serif; text-align: center; transition: all 0.3s; }
  button { padding: 14px 28px; font-size: 18px; cursor: pointer; margin: 20px; }
  .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 16px; max-width: 1200px; margin: auto; }
  .item { background: #161616; padding: 12px; border-radius: 10px; transition: all 0.3s; }
  .item img { width: 100%; max-height: 180px; object-fit: contain; }
  h3 { margin: 8px 0 4px; }
  .toggle { position: fixed; top: 10px; right: 10px; padding: 10px; cursor: pointer; background: #333; border-radius: 8px; }
  .light { background: #eaeaea; color: #0b0b0b; }
  .light .item { background: #ddd; color: #0b0b0b; }
</style>
</head>
<body>

<h1>üéØ Escape from Tarkov ‚Äì Random Loadout V3</h1>
<button onclick="generateLoadout()">üîÑ Neues Loadout</button>
<div class="toggle" onclick="toggleTheme()">üåì Dark/Light</div>

<div class="grid" id="loadout"></div>

<script>
// --- Fallback Set (umfangreich)
function loadFallbackData() {
  return [
    // Waffen (ausgew√§hlte Beispiele, stark erweitert)
    { id:"ak74m", name:"AK‚Äë74M", caliber:"5.45x39mm", types:["gun"] },
    { id:"aks74u", name:"AKS‚Äë74U", caliber:"5.45x39mm", types:["gun"] },
    { id:"akm", name:"AKM", caliber:"7.62x39mm", types:["gun"] },
    { id:"m4a1", name:"M4A1", caliber:"5.56x45mm", types:["gun"] },
    { id:"hk416a5", name:"HK416A5", caliber:"5.56x45mm", types:["gun"] },
    { id:"scar_l", name:"FN SCAR‚ÄëL", caliber:"5.56x45mm", types:["gun"] },
    { id:"mp5", name:"HK MP5", caliber:"9x19mm", types:["gun"] },
    { id:"mp7", name:"HK MP7", caliber:"4.6x30mm", types:["gun"] },
    { id:"pp19", name:"PP‚Äë19‚Äë01 Vityaz‚ÄëSN", caliber:"9x19mm", types:["gun"] },
    { id:"uzi", name:"UZI", caliber:"9x19mm", types:["gun"] },
    { id:"vss", name:"VSS Vintorez", caliber:"9x39mm", types:["gun"] },
    { id:"svd", name:"SVD Dragunov", caliber:"7.62x54R", types:["gun"] },
    { id:"rsass", name:"RSASS", caliber:"7.62x51mm", types:["gun"] },
    { id:"mosin", name:"Mosin Nagant", caliber:"7.62x54R", types:["gun"] },
    { id:"saiga12", name:"Saiga‚Äë12", caliber:"12/70", types:["gun"] },

    // Munition
    { id:"545bp", name:"5.45√ó39mm BP", caliber:"5.45x39mm", types:["ammo"] },
    { id:"545bs", name:"5.45√ó39mm BS", caliber:"5.45x39mm", types:["ammo"] },
    { id:"556m855", name:"5.56√ó45mm M855", caliber:"5.56x45mm", types:["ammo"] },
    { id:"556m855a1", name:"5.56√ó45mm M855A1", caliber:"5.56x45mm", types:["ammo"] },
    { id:"762x39ps", name:"7.62√ó39mm PS", caliber:"7.62x39mm", types:["ammo"] },
    { id:"762x39hp", name:"7.62√ó39mm HP", caliber:"7.62x39mm", types:["ammo"] },
    { id:"762x54r7n1", name:"7.62√ó54R 7N1", caliber:"7.62x54R", types:["ammo"] },
    { id:"762x51m80", name:"7.62√ó51mm M80", caliber:"7.62x51mm", types:["ammo"] },
    { id:"9x19fmj", name:"9x19mm FMJ", caliber:"9x19mm", types:["ammo"] },
    { id:"9x19ap", name:"9x19mm AP", caliber:"9x19mm", types:["ammo"] },
    { id:"9x39sp6", name:"9x39mm SP‚Äë6", caliber:"9x39mm", types:["ammo"] },
    { id:"4.6x30ap", name:"4.6√ó30mm AP", caliber:"4.6x30mm", types:["ammo"] },
    { id:"127slug", name:"12/70 Slug", caliber:"12/70", types:["ammo"] },

    // Armor
    { id:"paca_soft", name:"PACA Soft Armor", types:["armor"] },
    { id:"6b23", name:"6B23 Armor", types:["armor"] },
    { id:"6b43", name:"6B43 Armor", types:["armor"] },
    { id:"bntizhuk", name:"BNTI Zhuk‚Äë6a Armor", types:["armor"] },
    { id:"korundvm", name:"Korund‚ÄëVM Armor", types:["armor"] },
    { id:"ulach", name:"ULACH Plate Carrier", types:["armor"] },
    { id:"hexgrid", name:"Hexgrid Armor", types:["armor"] },

    // Rigs
    { id:"avs", name:"Crye AVS", types:["rig"] },
    { id:"blackrock", name:"BlackRock Chest Rig", types:["rig"] },
    { id:"eagle_rig", name:"Eagle‚ÄëAllied Rig", types:["rig"] },
    { id:"wartech_tv110", name:"Wartech TV‚Äë110", types:["rig"] },
    { id:"tasmanian_mk3", name:"Tasmanian Tiger MKIII", types:["rig"] },
    { id:"ana_m2", name:"ANA Tactical M2", types:["rig"] },
    { id:"poyasab", name:"Poyas A + B", types:["rig"] },

    // Helme
    { id:"kiver", name:"Kiver Helmet", types:["headwear"] },
    { id:"psh97", name:"PSh‚Äë97 Helmet", types:["headwear"] },
    { id:"kolpak_1s", name:"Kolpak‚Äë1S Helmet", types:["headwear"] },
    { id:"airframe", name:"Crye AirFrame", types:["headwear"] },
    { id:"team_wendy", name:"Team Wendy EXFIL", types:["headwear"] },

    // Rucks√§cke
    { id:"6sh118", name:"6Sh118 Backpack", types:["backpack"] },
    { id:"attack2", name:"SSO Attack 2 Backpack", types:["backpack"] },
    { id:"pilgrim", name:"Pilgrim Backpack", types:["backpack"] },
    { id:"rush100", name:"5.11 RUSH 100 Backpack", types:["backpack"] },
    { id:"blackjack50", name:"Mystery Ranch Blackjack 50", types:["backpack"] },

    // Maps
    { id:"map_factory", name:"Factory", types:["map"] },
    { id:"map_customs", name:"Customs", types:["map"] },
    { id:"map_woods", name:"Woods", types:["map"] },
    { id:"map_shoreline", name:"Shoreline", types:["map"] },
    { id:"map_interchange", name:"Interchange", types:["map"] },
    { id:"map_reserve", name:"Reserve", types:["map"] },
    { id:"map_lighthouse", name:"Lighthouse", types:["map"] },
    { id:"map_lab", name:"The Lab", types:["map"] }
  ];
}

// --- Hilfsfunktionen
function pick(arr) { return arr[Math.floor(Math.random()*arr.length)]; }

function card(title, item) {
  return `<div class="item"><h3>${title}</h3>${item.iconLink ? `<img src="${item.iconLink}">` : ""}<div>${item.name}</div></div>`;
}

// --- Theme Toggle
function toggleTheme() {
  document.body.classList.toggle("light");
}

// --- Loadout Generator
function generateLoadout() {
  const items = loadFallbackData();
  const guns = items.filter(i=>i.types.includes("gun"));
  const ammo = items.filter(i=>i.types.includes("ammo"));
  const armor = items.filter(i=>i.types.includes("armor"));
  const rigs = items.filter(i=>i.types.includes("rig"));
  const helmets = items.filter(i=>i.types.includes("headwear"));
  const backpacks = items.filter(i=>i.types.includes("backpack"));
  const maps = items.filter(i=>i.types.includes("map"));

  let weapon = pick(guns);
  let compatibleAmmo = ammo.filter(a=>a.caliber===weapon.caliber);
  let selectedAmmo = pick(compatibleAmmo);

  // Rig & Armor Logik: kein doppeltes Armor
  let rig = pick(rigs);
  let armorChoice = (rig.name.toLowerCase().includes("plate") || rig.name.toLowerCase().includes("armored")) 
                    ? null 
                    : pick(armor);

  let helmet = pick(helmets);
  let backpack = pick(backpacks);
  let map = pick(maps);

  document.getElementById("loadout").innerHTML = `
    ${card("üî´ Waffe", weapon)}
    ${selectedAmmo ? card("üí• Munition", selectedAmmo) : ""}
    ${card("üõ°Ô∏è Armor", armorChoice || {name:"Kein zus√§tzliche Armor"})}
    ${card("üéí Rig", rig)}
    ${card("ü•Ω Helm", helmet)}
    ${card("üéí Rucksack", backpack)}
    ${card("üó∫Ô∏è Map", map)}
  `;
}

// --- Initiales Loadout
generateLoadout();
</script>

</body>
</html>

