<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>EFT Random Loadout Generator V4</title>
<style>
  body { background: #0b0b0b; color: #eaeaea; font-family: Arial, sans-serif; text-align: center; transition: all 0.3s; }
  button { padding: 14px 28px; font-size: 18px; cursor: pointer; margin: 20px; }
  .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 16px; max-width: 1200px; margin: auto; }
  .item { background: #161616; padding: 12px; border-radius: 10px; transition: all 0.3s; }
  .item img { width: 100%; max-height: 180px; object-fit: contain; }
  h3 { margin: 8px 0 4px; }
  .toggle { position: fixed; top: 10px; right: 10px; padding: 10px; cursor: pointer; background: #333; border-radius: 8px; }
  .light { background: #eaeaea; color: #0b0b0b; }
  .light .item { background: #ddd; color: #0b0b0b; }
</style>
</head>
<body>

<h1>ðŸŽ¯ Escape from Tarkov â€“ Random Loadout V4</h1>
<button onclick="generateLoadout()">ðŸ”„ Neues Loadout</button>
<div class="toggle" onclick="toggleTheme()">ðŸŒ“ Dark/Light</div>

<div class="grid" id="loadout"></div>

<script>
// --- Fallback Set (umfangreich)
function loadFallbackData() {
  return [
    // Waffen
    { id:"ak74m", name:"AKâ€‘74M", caliber:"5.45x39mm", types:["gun"], attachments:["Scope","Suppressor","Grip","Laser","Magazine"] },
    { id:"m4a1", name:"M4A1", caliber:"5.56x45mm", types:["gun"], attachments:["Scope","Suppressor","Grip","Laser","Magazine"] },
    { id:"mp5", name:"HK MP5", caliber:"9x19mm", types:["gun"], attachments:["Scope","Suppressor","Grip","Laser","Magazine"] },
    { id:"vss", name:"VSS Vintorez", caliber:"9x39mm", types:["gun"], attachments:["Scope","Suppressor","Grip","Laser"] },
    { id:"svd", name:"SVD Dragunov", caliber:"7.62x54R", types:["gun"], attachments:["Scope","Suppressor","Grip"] },

    // Munition
    { id:"545bp", name:"5.45Ã—39mm BP", caliber:"5.45x39mm", types:["ammo"] },
    { id:"556m855", name:"5.56Ã—45mm M855", caliber:"5.56x45mm", types:["ammo"] },
    { id:"9x19fmj", name:"9x19mm FMJ", caliber:"9x19mm", types:["ammo"] },
    { id:"9x39sp6", name:"9x39mm SPâ€‘6", caliber:"9x39mm", types:["ammo"] },
    { id:"762x54r7n1", name:"7.62Ã—54R 7N1", caliber:"7.62x54R", types:["ammo"] },

    // Armor
    { id:"paca_soft", name:"PACA Soft Armor", types:["armor"] },
    { id:"6b23", name:"6B23 Armor", types:["armor"] },
    { id:"bntizhuk", name:"BNTI Zhukâ€‘6a Armor", types:["armor"] },

    // Rigs
    { id:"avs", name:"Crye AVS", types:["rig"] },
    { id:"blackrock", name:"BlackRock Chest Rig", types:["rig"] },
    { id:"wartech_tv110", name:"Wartech TVâ€‘110", types:["rig"] },

    // Helme
    { id:"kiver", name:"Kiver Helmet", types:["headwear"] },
    { id:"psh97", name:"PShâ€‘97 Helmet", types:["headwear"] },

    // RucksÃ¤cke
    { id:"6sh118", name:"6Sh118 Backpack", types:["backpack"] },
    { id:"pilgrim", name:"Pilgrim Backpack", types:["backpack"] },

    // Maps
    { id:"map_factory", name:"Factory", types:["map"] },
    { id:"map_customs", name:"Customs", types:["map"] },
    { id:"map_woods", name:"Woods", types:["map"] }
  ];
}

// --- Hilfsfunktionen
function pick(arr) { return arr[Math.floor(Math.random()*arr.length)]; }

function card(title, item) {
  return `<div class="item"><h3>${title}</h3>${item.iconLink ? `<img src="${item.iconLink}">` : ""}<div>${item.name}</div></div>`;
}

function toggleTheme() { document.body.classList.toggle("light"); }

// --- Loadout Generator
function generateLoadout() {
  const items = loadFallbackData();
  const guns = items.filter(i=>i.types.includes("gun"));
  const ammo = items.filter(i=>i.types.includes("ammo"));
  const armor = items.filter(i=>i.types.includes("armor"));
  const rigs = items.filter(i=>i.types.includes("rig"));
  const helmets = items.filter(i=>i.types.includes("headwear"));
  const backpacks = items.filter(i=>i.types.includes("backpack"));
  const maps = items.filter(i=>i.types.includes("map"));

  let weapon = pick(guns);
  let compatibleAmmo = ammo.filter(a=>a.caliber===weapon.caliber);
  let selectedAmmo = pick(compatibleAmmo);

  // Rig & Armor Logik
  let rig = pick(rigs);
  let armorChoice = (rig.name.toLowerCase().includes("plate") || rig.name.toLowerCase().includes("armored")) 
                    ? null 
                    : pick(armor);

  let helmet = pick(helmets);
  let backpack = pick(backpacks);
  let map = pick(maps);

  // Waffen-Attachments zufÃ¤llig auswÃ¤hlen
  let attachmentsHTML = "";
  if (weapon.attachments) {
    weapon.attachments.forEach(att => {
      if (Math.random() < 0.5) { // 50% Chance fÃ¼r jedes Attachment
        attachmentsHTML += card(att, {name: att});
      }
    });
  }

  document.getElementById("loadout").innerHTML = `
    ${card("ðŸ”« Waffe", weapon)}
    ${attachmentsHTML}
    ${selectedAmmo ? card("ðŸ’¥ Munition", selectedAmmo) : ""}
    ${card("ðŸ›¡ï¸ Armor", armorChoice || {name:"Keine zusÃ¤tzliche Armor"})}
    ${card("ðŸŽ’ Rig", rig)}
    ${card("ðŸ¥½ Helm", helmet)}
    ${card("ðŸŽ’ Rucksack", backpack)}
    ${card("ðŸ—ºï¸ Map", map)}
  `;
}

// --- Initiales Loadout
generateLoadout();
</script>

</body>
</html>
